{% extends 'base.html' %} {% block title %}{{ title }} - Campus Connect{%
endblock %} {% block content %}
<div class="max-w-7xl mx-auto">
  <!-- Page Header -->
  <div class="mb-8">
    <h1 class="text-4xl font-bold text-university-blue">{{ title }}</h1>
    <p class="text-gray-600 mt-2">
      Browse lost and found items reported by PUCIT community
    </p>
  </div>

  <!-- Search and Filter Section -->
  <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
    <form method="get" class="space-y-4">
      <div class="grid md:grid-cols-4 gap-4">
        <!-- Search -->
        <div class="md:col-span-2">{{ search_form.search }}</div>

        <!-- Type Filter -->
        <div>{{ search_form.item_type }}</div>

        <!-- Category Filter -->
        <div>{{ search_form.category }}</div>
      </div>

      <div class="grid md:grid-cols-3 gap-4">
        <!-- Date From -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2"
            >From Date</label
          >
          {{ search_form.date_from }}
        </div>

        <!-- Date To -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2"
            >To Date</label
          >
          {{ search_form.date_to }}
        </div>

        <!-- Search Button -->
        <div class="flex items-end">
          <button
            type="submit"
            class="w-full bg-university-blue text-white py-3 rounded-lg hover:bg-university-blue-light transition font-medium"
          >
            <svg
              class="w-5 h-5 inline mr-2"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                fill-rule="evenodd"
                d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
                clip-rule="evenodd"
              />
            </svg>
            Search
          </button>
        </div>
      </div>
    </form>
  </div>

  <!-- Quick Links -->
  <div class="flex flex-wrap gap-2 mb-6">
    <a
      href="{% url 'items:list' %}"
      class="px-6 py-2 rounded-lg {% if not item_type %}bg-university-blue text-white{% else %}bg-gray-200 text-gray-700 hover:bg-gray-300{% endif %} transition font-medium"
    >
      All Items
    </a>
    <a
      href="{% url 'items:lost' %}"
      class="px-6 py-2 rounded-lg {% if item_type == 'lost' %}bg-red-500 text-white{% else %}bg-gray-200 text-gray-700 hover:bg-gray-300{% endif %} transition font-medium"
    >
      Lost Items
    </a>
    <a
      href="{% url 'items:found' %}"
      class="px-6 py-2 rounded-lg {% if item_type == 'found' %}bg-green-500 text-white{% else %}bg-gray-200 text-gray-700 hover:bg-gray-300{% endif %} transition font-medium"
    >
      Found Items
    </a>
  </div>

  <!-- Results Count -->
  {% if total_items %}
  <p class="text-gray-600 mb-4">
    Showing {{ page_obj.start_index }}-{{ page_obj.end_index }} of {{
    total_items }} items
  </p>
  {% endif %}

  <!-- Items Grid -->
  {% if page_obj %}
  <div class="grid md:grid-cols-3 gap-6 mb-8">
    {% for item in page_obj %}
    <div
      class="bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition"
    >
      <!-- Item Image -->
      <div class="relative h-48 bg-gray-200">
        {% if item.image %}
        <img
          src="{{ item.image.url }}"
          alt="{{ item.title }}"
          class="w-full h-full object-cover"
        />
        {% else %}
        <div class="w-full h-full flex items-center justify-center">
          <svg
            class="w-16 h-16 text-gray-400"
            fill="currentColor"
            viewBox="0 0 20 20"
          >
            <path
              fill-rule="evenodd"
              d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z"
              clip-rule="evenodd"
            />
          </svg>
        </div>
        {% endif %}

        <!-- Type Badge -->
        <div class="absolute top-2 right-2">
          {% if item.item_type == 'lost' %}
          <span
            class="bg-red-500 text-white px-3 py-1 rounded-full text-xs font-semibold"
            >Lost</span
          >
          {% else %}
          <span
            class="bg-green-500 text-white px-3 py-1 rounded-full text-xs font-semibold"
            >Found</span
          >
          {% endif %}
        </div>

        <!-- Reward Badge -->
        {% if item.reward_offered %}
        <div class="absolute top-2 left-2">
          <span
            class="bg-yellow-500 text-white px-3 py-1 rounded-full text-xs font-semibold"
            >ðŸ’° Reward</span
          >
        </div>
        {% endif %}
      </div>

      <!-- Item Details -->
      <div class="p-4">
        <h3 class="text-lg font-bold text-gray-800 mb-2 truncate">
          {{ item.title }}
        </h3>
        <p class="text-gray-600 text-sm mb-3 line-clamp-2">
          {{ item.description|truncatewords:15 }}
        </p>

        <!-- Meta Information -->
        <div class="space-y-2 text-sm text-gray-500 mb-4">
          <div class="flex items-center">
            <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
              <path
                fill-rule="evenodd"
                d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z"
                clip-rule="evenodd"
              />
            </svg>
            {{ item.location }}
          </div>
          <div class="flex items-center">
            <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
              <path
                fill-rule="evenodd"
                d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z"
                clip-rule="evenodd"
              />
            </svg>
            {{ item.date_lost_found|date:"M d, Y" }}
          </div>
          <div class="flex items-center">
            <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
              <path d="M10 12a2 2 0 100-4 2 2 0 000 4z" />
              <path
                fill-rule="evenodd"
                d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z"
                clip-rule="evenodd"
              />
            </svg>
            {{ item.views_count }} views
          </div>
        </div>

        <!-- View Details Button -->
        <a
          href="{% url 'items:detail' item.pk %}"
          class="block w-full bg-university-blue text-white text-center py-2 rounded-lg hover:bg-university-blue-light transition font-medium"
        >
          View Details
        </a>
      </div>
    </div>
    {% endfor %}
  </div>

  <!-- Pagination -->
  {% if page_obj.has_other_pages %}
  <div class="flex justify-center space-x-2">
    {% if page_obj.has_previous %}
    <a
      href="?page=1"
      class="px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300 transition"
      >First</a
    >
    <a
      href="?page={{ page_obj.previous_page_number }}"
      class="px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300 transition"
      >Previous</a
    >
    {% endif %}

    <span class="px-4 py-2 bg-university-blue text-white rounded-lg">
      Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
    </span>

    {% if page_obj.has_next %}
    <a
      href="?page={{ page_obj.next_page_number }}"
      class="px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300 transition"
      >Next</a
    >
    <a
      href="?page={{ page_obj.paginator.num_pages }}"
      class="px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300 transition"
      >Last</a
    >
    {% endif %}
  </div>
  {% endif %} {% else %}
  <!-- Empty State -->
  <div class="bg-white rounded-xl shadow-lg p-12 text-center">
    <svg
      class="w-24 h-24 text-gray-300 mx-auto mb-4"
      fill="currentColor"
      viewBox="0 0 20 20"
    >
      <path
        fill-rule="evenodd"
        d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
        clip-rule="evenodd"
      />
    </svg>
    <h3 class="text-2xl font-bold text-gray-600 mb-2">No Items Found</h3>
    <p class="text-gray-500 mb-6">
      Try adjusting your search filters or check back later.
    </p>
    {% if user.is_authenticated and user.is_verified %}
    <a
      href="{% url 'items:create' %}"
      class="inline-block bg-university-blue text-white px-8 py-3 rounded-lg hover:bg-university-blue-light transition font-medium"
    >
      Post an Item
    </a>
    {% endif %}
  </div>
  {% endif %}
</div>
{% endblock %}
